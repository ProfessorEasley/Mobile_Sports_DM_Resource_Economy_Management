{
  "title": "Economy Data Payload",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "wallet_management",
    "transaction_history",
    "economy_health"
  ],
  "properties": {
    "wallet_management": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "player_id",
        "current_balances",
        "max_capacities",
        "earn_rates"
      ],
      "properties": {
        "player_id": {
          "description": "Unique player identifier in UUID format.",
          "type": "string",
          "format": "uuid"
        },
        "current_balances": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "coins",
            "gems",
            "credits"
          ],
          "properties": {
            "coins": { "type": "integer" },
            "gems": { "type": "integer" },
            "credits": { "type": "integer" }
          }
        },
        "max_capacities": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "coins",
            "gems",
            "credits"
          ],
          "properties": {
            "coins": { "type": "integer" },
            "gems": { "type": "integer" },
            "credits": { "type": "integer" }
          }
        },
        "earn_rates": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "coins_per_hour",
            "gems_per_day",
            "credits_per_week"
          ],
          "properties": {
            "coins_per_hour": { "type": "integer" },
            "gems_per_day": { "type": "integer" },
            "credits_per_week": { "type": "integer" }
          }
        }
      }
    },
    "transaction_history": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "transaction_id",
          "player_id",
          "currency",
          "type",
          "amount",
          "source",
          "timestamp",
          "new_balance"
        ],
        "properties": {
          "transaction_id": {
            "description": "Unique identifier for the transaction.",
            "type": "string",
            "format": "uuid"
          },
          "player_id": {
            "description": "Player identifier associated with the transaction.",
            "type": "string",
            "format": "uuid"
          },
          "currency": {
            "description": "Currency impacted by this transaction.",
            "type": "string"
          },
          "type": {
            "description": "Transaction type.",
            "type": "string",
            "enum": [
              "earn",
              "spend"
            ]
          },
          "amount": {
            "description": "Non-negative amount processed.",
            "type": "integer",
            "minimum": 0
          },
          "source": {
            "description": "Origin of the transaction event.",
            "type": "string",
            "enum": [
              "coach_hiring",
              "match_win",
              "pack_purchase"
            ]
          },
          "timestamp": {
            "description": "Timestamp in ISO-8601 format (UTC).",
            "type": "string",
            "format": "date-time"
          },
          "new_balance": {
            "description": "Balance immediately after this transaction.",
            "type": "integer"
          }
        }
      }
    },
    "economy_health": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "player_id",
        "balance_status",
        "next_failure_week",
        "suggestions"
      ],
      "properties": {
        "player_id": {
          "type": "string",
          "format": "uuid"
        },
        "balance_status": {
          "type": "string",
          "enum": [
            "healthy",
            "at_risk",
            "critical"
          ]
        },
        "next_failure_week": {
          "type": "integer",
          "minimum": 0
        },
        "suggestions": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    }
  },
  "examples": [
    {
      "wallet_management": {
        "player_id": "0b363705-6a2d-4a12-a2b9-9fd012345678",
        "current_balances": {
          "coins": 1250,
          "gems": 45,
          "credits": 18
        },
        "max_capacities": {
          "coins": 5000,
          "gems": 200,
          "credits": 100
        },
        "earn_rates": {
          "coins_per_hour": 120,
          "gems_per_day": 3,
          "credits_per_week": 8
        }
      },
      "transaction_history": [
        {
          "transaction_id": "7a2a3ad6-5c9e-4bc5-9aa8-24fa12345678",
          "player_id": "0b363705-6a2d-4a12-a2b9-9fd012345678",
          "currency": "coins",
          "type": "earn",
          "amount": 250,
          "source": "match_win",
          "timestamp": "2025-08-24T00:10:02Z",
          "new_balance": 1500
        }
      ],
      "economy_health": {
        "player_id": "0b363705-6a2d-4a12-a2b9-9fd012345678",
        "balance_status": "healthy",
        "next_failure_week": 0,
        "suggestions": [
          "Increase premium sinks",
          "Monitor coaching credit cap"
        ]
      }
    }
  ]
}
